jQuery(document).ready((function($){function toggleNav(){var navIsVisible=!$(".cd-dropdown").hasClass("dropdown-is-active");$(".cd-dropdown").toggleClass("dropdown-is-active",navIsVisible),$(".house_toggle").toggleClass("dropdown-is-active",navIsVisible),navIsVisible||$(".cd-dropdown").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){$(".has-children ul").addClass("is-hidden"),$(".move-out").removeClass("move-out"),$(".is-active").removeClass("is-active")}))}$(".house_toggle").on("click",(function(event){event.preventDefault(),toggleNav()})),$(".cd-dropdown .cd-close").on("click",(function(event){event.preventDefault(),toggleNav()})),$(".has-children").children("a").on("click",(function(event){var selected;event.preventDefault(),$(this).next("ul").removeClass("is-hidden").end().parent(".has-children").parent("ul").addClass("move-out")})),$(".go-back").on("click",(function(){var selected=$(this),visibleNav=$(this).parent("ul").parent(".has-children").parent("ul");selected.parent("ul").addClass("is-hidden").parent(".has-children").parent("ul").removeClass("move-out")}))})),function($){function init(opts){var $menu=$(this),activeRow=null,mouseLocs=[],lastDelayLoc=null,timeoutId=null,options=$.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:$.noop,exit:$.noop,activate:$.noop,deactivate:$.noop,exitMenu:$.noop},opts),MOUSE_LOCS_TRACKED=3,DELAY=300,mousemoveDocument=function(e){mouseLocs.push({x:e.pageX,y:e.pageY}),mouseLocs.length>3&&mouseLocs.shift()},mouseleaveMenu=function(){timeoutId&&clearTimeout(timeoutId),options.exitMenu(this)&&(activeRow&&options.deactivate(activeRow),activeRow=null)},mouseenterRow=function(){timeoutId&&clearTimeout(timeoutId),options.enter(this),possiblyActivate(this)},mouseleaveRow=function(){options.exit(this)},clickRow=function(){activate(this)},activate=function(row){row!=activeRow&&(activeRow&&options.deactivate(activeRow),options.activate(row),activeRow=row)},possiblyActivate=function(row){var delay=activationDelay();delay?timeoutId=setTimeout((function(){possiblyActivate(row)}),delay):activate(row)},activationDelay=function(){if(!activeRow||!$(activeRow).is(options.submenuSelector))return 0;var offset=$menu.offset(),upperLeft={x:offset.left,y:offset.top-options.tolerance},upperRight={x:offset.left+$menu.outerWidth(),y:upperLeft.y},lowerLeft={x:offset.left,y:offset.top+$menu.outerHeight()+options.tolerance},lowerRight={x:offset.left+$menu.outerWidth(),y:lowerLeft.y},loc=mouseLocs[mouseLocs.length-1],prevLoc=mouseLocs[0];if(!loc)return 0;if(prevLoc||(prevLoc=loc),prevLoc.x<offset.left||prevLoc.x>lowerRight.x||prevLoc.y<offset.top||prevLoc.y>lowerRight.y)return 0;if(lastDelayLoc&&loc.x==lastDelayLoc.x&&loc.y==lastDelayLoc.y)return 0;function slope(a,b){return(b.y-a.y)/(b.x-a.x)}var decreasingCorner=upperRight,increasingCorner=lowerRight;"left"==options.submenuDirection?(decreasingCorner=lowerLeft,increasingCorner=upperLeft):"below"==options.submenuDirection?(decreasingCorner=lowerRight,increasingCorner=lowerLeft):"above"==options.submenuDirection&&(decreasingCorner=upperLeft,increasingCorner=upperRight);var decreasingSlope=slope(loc,decreasingCorner),increasingSlope=slope(loc,increasingCorner),prevDecreasingSlope=slope(prevLoc,decreasingCorner),prevIncreasingSlope=slope(prevLoc,increasingCorner);return decreasingSlope<prevDecreasingSlope&&increasingSlope>prevIncreasingSlope?(lastDelayLoc=loc,300):(lastDelayLoc=null,0)};$menu.mouseleave(mouseleaveMenu).find(options.rowSelector).mouseenter(mouseenterRow).mouseleave(mouseleaveRow).click(clickRow),$(document).mousemove(mousemoveDocument)}$.fn.menuAim=function(opts){return this.each((function(){init.call(this,opts)})),this}}(jQuery);